<!DOCTYPE html>
<html lang="en">
<head>
    {% load staticfiles %}

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>资源查询</title>
    <link href="{% static 'bootstrap-datetimepicker.min.css'  %}" rel="stylesheet" />
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.1/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>

    <![endif]-->
    <style>
        .search-list {
            visibility:visible;
            transform-origin:41.5px 11px 0px;
            position:relative;
            width:72px;
            background-color:rgba(242, 242, 242, 1);
            text-align:center;
            font-size: 13px;
            height:34px;
            line-height:34px;
        }
    </style>
</head>
<body>
    <div class="container" style="margin-top: 10px">
        <div class="row">
            <div class="col-xs-12">
                <div class="panel-body" style="overflow-x:auto">
                <div class="search-header" style="display:inline-flex">
                    <div class="search-list">
                        <p>入库时间</p>
                    </div>
                    <div class="search-list" style="left:150px;">
                        <p>卫星种类</p>
                    </div>
                    <div class="search-list" style="left:257px;">
                        <p>其他条件</p>
                    </div>
                    <div class="search-list" style="left:500px;">
                        <p>地图查看</p>
                    </div>
                    <div class="search-list" style="left:520px;">
                        <p>列表查看</p>
                    </div>
                </div>
                <div style="margin-top:10px; display:inline-flex">
                    <form action='/map_inquiry/' style="display:inline-flex" method="post" >
                        <div>
                            <input name='date' type='date' class="form-control nowdate" style="width:auto"/>
                        </div>
                        <div style="margin-left:90px">
                            <select name="satelite_name">
                                <option value="高分2号">高分2号</option>
                                <option value="高景1号">高景1号</option>
                            </select>
                        </div>
                        <div style="margin-left:43px; display:inline-flex">
                            <input type='text' class="form-control" style="width:auto" placeholder="请输入其他查询条件"/>
                            <span class="input-group-btn" style="padding-left:7px">
                                <button  type="submit" class="btn btn-primary">搜索</button>
                            </span>
                        </div>
                    </form>
                    <div id="globe-search" style="cursor:pointer; padding-left:80px">
                        <span class="glyphicon glyphicon-globe" style="color:#337ab7; font-size:40px"></span>
                    </div>
                    <div id="list-search" style="cursor:pointer; padding-left:50px">
                        <span class="glyphicon glyphicon-list" style="color:#337ab7; font-size:40px"></span>
                    </div>
                </div>
                <div id="globe-search-result"></div>
                <div id="list-search-result" style="display:none; width:900px">
                    <table id="resultTab" border="0" cellspacing="0" cellpadding="0" class="table">
                        <tr class="label-primary">
                            <th scope="col" width="5%"><span style="color:white">序号</span></th>
                            <th scope="col" width="15%"><span style="color:white">影像资源</span></th>
                            <th scope="col" width="10%"><span style="color:white">入库时间</span></th>
                            <th scope="col" width="5%"><span style="color:white">用户</span></th>
                            <th scope="col" width="5%"><span style="color:white">荷载</span></th>
                            <th scope="col" width="10%"><span style="color:white">卫星</span></th>
                            <th scope="col" width="10%"><span style="color:white">影像类别</span></th>
                            <th scope="col" width="10%"><span style="color:white">下载次数</span></th>
                            <th scope="col" class ="authorityTh"><span class="authoritySpan" style="color:white">操作</span></th>
                        </tr>
                    </table>
                </div>
                </div>
            </div>
            <div class="col-xs-0"></div>
            <footer></footer>
        </div>
    </div>
    <script>
    var data = [{
        "id": 1,
        "resource": "111111",
        "date": "2018/04/19",
        "user": "admin",
        "load": "CCD1",
        "satellite": "高分1号",
        "type": "二级影像",
        "download": "2"
    },{
        "id": "2",
        "resource": "2222",
        "date": "2018/04/19",
        "user": "admin1",
        "load": "PAD-1",
        "satellite": "高分1号",
        "type": "三级影像",
        "download": "3"
    }];
    window.onload=function(){
        //默认获取当前日期
        var today = new Date();
        var nowdate = (today.getFullYear()) + "-" + (today.getMonth() + 1) + "-" + today.getDate();
        //对日期格式进行处理
        var date = new Date(nowdate);
        var mon = date.getMonth() + 1;
        var day = date.getDate();
        var mydate = date.getFullYear() + "-" + (mon < 10 ? "0" + mon : mon) + "-" + (day < 10 ? "0" + day : day);
        $(".nowdate").val(mydate);
        $("#globe-search").click(function (){
            $("#list-search-result").css("display","none");
            $("#globe-search-result").css("display","block");
        });
        $("#list-search").click(function(){
            $("#list-search-result").css("display","block");
            $("#globe-search-result").css("display","none");
        });
        showList();
    };
    function showList(){
        var resultTab = $("#resultTab");
        data.forEach(function(item){
            $(
                '<tr/>',
                    {
                }).append($('<td/>', {
                    text : item.id
                }))
                .append($('<td/>',{
                    text : item.resource
                }))
                .append($('<td/>',{
                    text : item.date
                }))
                .append($('<td/>',{
                    text : item.user
                }))
                .append($('<td/>',{
                    text : item.load
                }))
                .append($('<td/>',{
                    text : item.satellite
                }))
                .append($('<td/>',{
                    text : item.type
                }))
                .append($('<td/>',{
                    text : item.download
                }))
                .append($('<td/>')
                .append($('<p/>')
                .append($('<button/>',{
                    'class' : 'operate',
                    text : '查看'
                }))
                .append($('<button/>',{
                    'class' : 'operate',
                    text : '下载'
                }))
                .append($('<button/>',{
                    'class' : 'operate',
                    text : '删除'
                }))))
                .appendTo(resultTab);
        });
    };
    </script>
</body>
</html>